{"ast":null,"code":"// import { useCallback, useEffect, useState } from \"react\";\n// import { motion, AnimatePresence} from 'framer-motion';\n// import toast, { Toaster } from  'react-hot-toast';\n// import { useSocket } from './hooks/useSocket';\n// import AuctionCard from './components/AuctionCard';\n// import './App.css';\n\n// const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n\n// function App() {\n//     const [items, setItems] = useState([]);\n//     const [loading, setLoading] = useState(true);\n//     const [userId] = useState(() => {\n//         let id = localStorage.getItem('userId');\n//         if (!id) {\n//             id = `user_${Math.random().toString(36).substr(2, 9)}`;\n//             localStorage.setItem('userId', id);\n//     }\n//     return id;\n// });\n\n//     const { placeBid, on, off, isConnected, getServerTime} = useSocket(userId);\n\n//     const fetchItems = useCallback(async () => {\n//         try {\n//             const response = await fetch(`${API_URL}/api/items`);\n//             const data = await response.json();\n//             setItems(data.items || []);\n//             setLoading(false);\n//         } catch (error) {\n//           console.log('Error fetching items:', error);\n//           toast.error('Failed to load auctions');\n//           setLoading(false);\n//         }\n//     }, []);\n\n//     useEffect(() => {\n//         fetchItems();\n//     }, [fetchItems]); \n\n//     useEffect(() => {\n//         const handleBidUpdate = (data) => {\n//             const { itemId, currentBid, highestBidder, bidCount } = data;\n\n//             setItems(prevItems => \n//                 prevItems.map(item => item.id === itemId ? {...item, currentBid, highestBidder, bidCount}\n//                     : item));\n\n//             const isMyBid = highestBidder === userId;\n//             if (isMyBid) {\n//                 toast.success(`You're winning! $${currentBid.toLocaleString()}`, {\n//                     icon: 'ðŸŽ¯',\n//                     duration: 3000\n//                 });\n//             } else {\n//                 const item = items.find(i => i.id === itemId);\n//                 if (item && item.highestBidder === userId) {\n//                     toast.error(`You've been outbid on ${item.title}!`, {\n//                         icon: 'âš ï¸',\n//                         duration: 4000\n//                     })\n//                 }\n//             }    \n//         };\n\n//     const handleBidError = (data) => {\n//         const { error, message } =  data;\n\n//         if (error === 'BID_TOO_LOW') {\n//             toast.error(message, {\n//                 icon: 'ðŸ’¨',\n//                 duration: 3000\n//             });  \n//         } else if (error === 'AUCTION_ENDED') {\n//             toast.error('This auction has ended', {\n//                 icon: 'â°',\n//                 duration: 3000\n//             });\n//         } else {\n//             toast.error(message || 'Bid failed', {\n//                 icon: 'âŒ',\n//                 duration: 3000\n//             });\n//         }\n//     };\n\n//     const handleItemsUpdate = (data) => {\n//         setItems(data.items || []);\n//     }\n\n//     on('onBidUpdate', handleBidUpdate);\n//     on('onBidError', handleBidError);\n//     on('itemsUpdate', handleItemsUpdate);\n\n//     return () => {\n//         off('onBidUpdate');\n//         off('onBidError');\n//         off('itemsUpdate');\n//     };\n// }, [on, off, userId, items]);\n\n// const handleBid = useCallback((itemId, bidAmount) => {\n//     placeBid(itemId, bidAmount);\n// }, [placeBid]);\n\n// if (loading) {\n//     return (\n//         <div className=\"Loading-screen\">\n//             <motion.div\n//               className=\"loading-spinner\"\n//               animate={{ rotate: 360 }}\n//               transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n//             >\n//              âš¡\n//             </motion.div>\n//             <p>Loading auctions...</p>\n//         </div>\n//     );  \n// }\n//     return (\n//         <div className=\"app\">\n//             <Toaster position=\"top-right\" />\n\n//             <AnimatePresence>\n//                 <motion.div className='auction-grid'>\n//                     {items.map((item, index) => (\n//                     <motion.div\n//                         key={item.id}\n//                         initial={{ opacity: 0, y: 20 }}\n//                         animate={{ opacity: 1, y: 0 }}\n//                         transition={{ delay: index * 0.05 }}\n//                     >\n//                         <AuctionCard\n//                         item={item}\n//                         userId={userId}\n//                         onBid={handleBid}\n//                         getServerTime={getServerTime}\n//                         />\n//                         </motion.div>\n//                     ))}\n//                 </motion.div>\n//             </AnimatePresence>\n//         </div>\n//     );\n// }\n\n// export default App();","map":{"version":3,"names":[],"sources":["C:/Users/kunal/Desktop/auction platform/frontend/src/App.js"],"sourcesContent":["// import { useCallback, useEffect, useState } from \"react\";\r\n// import { motion, AnimatePresence} from 'framer-motion';\r\n// import toast, { Toaster } from  'react-hot-toast';\r\n// import { useSocket } from './hooks/useSocket';\r\n// import AuctionCard from './components/AuctionCard';\r\n// import './App.css';\r\n\r\n// const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\r\n\r\n// function App() {\r\n//     const [items, setItems] = useState([]);\r\n//     const [loading, setLoading] = useState(true);\r\n//     const [userId] = useState(() => {\r\n//         let id = localStorage.getItem('userId');\r\n//         if (!id) {\r\n//             id = `user_${Math.random().toString(36).substr(2, 9)}`;\r\n//             localStorage.setItem('userId', id);\r\n//     }\r\n//     return id;\r\n// });\r\n    \r\n//     const { placeBid, on, off, isConnected, getServerTime} = useSocket(userId);\r\n\r\n//     const fetchItems = useCallback(async () => {\r\n//         try {\r\n//             const response = await fetch(`${API_URL}/api/items`);\r\n//             const data = await response.json();\r\n//             setItems(data.items || []);\r\n//             setLoading(false);\r\n//         } catch (error) {\r\n//           console.log('Error fetching items:', error);\r\n//           toast.error('Failed to load auctions');\r\n//           setLoading(false);\r\n//         }\r\n//     }, []);\r\n\r\n//     useEffect(() => {\r\n//         fetchItems();\r\n//     }, [fetchItems]); \r\n    \r\n//     useEffect(() => {\r\n//         const handleBidUpdate = (data) => {\r\n//             const { itemId, currentBid, highestBidder, bidCount } = data;\r\n\r\n//             setItems(prevItems => \r\n//                 prevItems.map(item => item.id === itemId ? {...item, currentBid, highestBidder, bidCount}\r\n//                     : item));\r\n\r\n//             const isMyBid = highestBidder === userId;\r\n//             if (isMyBid) {\r\n//                 toast.success(`You're winning! $${currentBid.toLocaleString()}`, {\r\n//                     icon: 'ðŸŽ¯',\r\n//                     duration: 3000\r\n//                 });\r\n//             } else {\r\n//                 const item = items.find(i => i.id === itemId);\r\n//                 if (item && item.highestBidder === userId) {\r\n//                     toast.error(`You've been outbid on ${item.title}!`, {\r\n//                         icon: 'âš ï¸',\r\n//                         duration: 4000\r\n//                     })\r\n//                 }\r\n//             }    \r\n//         };\r\n\r\n//     const handleBidError = (data) => {\r\n//         const { error, message } =  data;\r\n\r\n//         if (error === 'BID_TOO_LOW') {\r\n//             toast.error(message, {\r\n//                 icon: 'ðŸ’¨',\r\n//                 duration: 3000\r\n//             });  \r\n//         } else if (error === 'AUCTION_ENDED') {\r\n//             toast.error('This auction has ended', {\r\n//                 icon: 'â°',\r\n//                 duration: 3000\r\n//             });\r\n//         } else {\r\n//             toast.error(message || 'Bid failed', {\r\n//                 icon: 'âŒ',\r\n//                 duration: 3000\r\n//             });\r\n//         }\r\n//     };\r\n\r\n//     const handleItemsUpdate = (data) => {\r\n//         setItems(data.items || []);\r\n//     }\r\n\r\n//     on('onBidUpdate', handleBidUpdate);\r\n//     on('onBidError', handleBidError);\r\n//     on('itemsUpdate', handleItemsUpdate);\r\n\r\n//     return () => {\r\n//         off('onBidUpdate');\r\n//         off('onBidError');\r\n//         off('itemsUpdate');\r\n//     };\r\n// }, [on, off, userId, items]);\r\n\r\n// const handleBid = useCallback((itemId, bidAmount) => {\r\n//     placeBid(itemId, bidAmount);\r\n// }, [placeBid]);\r\n\r\n// if (loading) {\r\n//     return (\r\n//         <div className=\"Loading-screen\">\r\n//             <motion.div\r\n//               className=\"loading-spinner\"\r\n//               animate={{ rotate: 360 }}\r\n//               transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\r\n//             >\r\n//              âš¡\r\n//             </motion.div>\r\n//             <p>Loading auctions...</p>\r\n//         </div>\r\n//     );  \r\n// }\r\n//     return (\r\n//         <div className=\"app\">\r\n//             <Toaster position=\"top-right\" />\r\n     \r\n//             <AnimatePresence>\r\n//                 <motion.div className='auction-grid'>\r\n//                     {items.map((item, index) => (\r\n//                     <motion.div\r\n//                         key={item.id}\r\n//                         initial={{ opacity: 0, y: 20 }}\r\n//                         animate={{ opacity: 1, y: 0 }}\r\n//                         transition={{ delay: index * 0.05 }}\r\n//                     >\r\n//                         <AuctionCard\r\n//                         item={item}\r\n//                         userId={userId}\r\n//                         onBid={handleBid}\r\n//                         getServerTime={getServerTime}\r\n//                         />\r\n//                         </motion.div>\r\n//                     ))}\r\n//                 </motion.div>\r\n//             </AnimatePresence>\r\n//         </div>\r\n//     );\r\n// }\r\n\r\n// export default App();\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}